#@ load("@ytt:data", "data")
#@ load("helpers.star", "backupStorageLocationConfig")
---
apiVersion: velero.io/v1
kind: BackupStorageLocation
metadata:
  labels:
    component: velero
  name: #@ data.values.backupStorageLocation.name
  namespace: #@ data.values.namespace
spec:
#@ if data.values.provider == 'minio':
  provider: aws
#@ else:
  provider: #@ data.values.provider
#@ end
  objectStorage:
    bucket: #@ data.values.backupStorageLocation.bucket
  config: #@ backupStorageLocationConfig(data.values.provider, data.values.backupStorageLocation)
